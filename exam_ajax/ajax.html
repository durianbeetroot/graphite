<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Exam AJAX</title>
</head>
<body>
  <!-- Contact form -->
  <form id="contactForm" data-form="contact">
    <!-- User name input -->
    <input type="text" id="name" name="name" placeholder="Your Name" required>
    <!-- User email input -->
    <input type="email" id="email" name="email" placeholder="Your Email" required>
    <!-- User message input -->
    <textarea id="message" name="message" placeholder="Your Message" required></textarea>
    <!-- Submit button -->
    <button type="submit">Submit</button>
    <!-- Message display for success or error -->
    <p id="responseMessage" style="display:none;"></p>
  </form>

  <script>
    // Wait until the page is fully loaded
    document.addEventListener("DOMContentLoaded", function() {
      // Grab the form using the data-form attribute
      const form = document.querySelector('[data-form="contact"]');
      // Grab the <p> element for showing messages
      const responseMessage = document.getElementById("responseMessage");

      // Listen for the form submission
      form.addEventListener("submit", function(event) {
        // Stop the form from doing a normal page reload
        event.preventDefault();

        // Collect values from the form inputs
        const name = document.getElementById("name").value;
        const email = document.getElementById("email").value;
        const message = document.getElementById("message").value;

        // Prepare data object to send
        const data = { name, email, message };

        // Send the data using fetch API
        fetch("https://jsonplaceholder.typicode.com/posts", {
          method: "POST", // Sending data
          headers: { "Content-Type": "application/json" }, // Tell server it's JSON
          body: JSON.stringify(data) // Convert object to JSON string
        })
        .then(response => {
          // If server response is not OK, throw an error
          if (!response.ok) throw new Error("Network response was not ok");
          return response.json(); // Parse response as JSON
        })
        .then(result => {
          // Success: log the returned ID
          console.log("Form submitted successfully", result.id);
          // Show the message paragraph
          responseMessage.style.display = "block";
          // Update text with success and returned ID
          responseMessage.textContent = "Form submitted successfully. ID: " + result.id;
          // Set text color to green for success
          responseMessage.style.color = "green";
        })
        .catch(error => {
          // If something goes wrong, log the error
          console.error("Form submission failed", error.message);
          // Show the message paragraph
          responseMessage.style.display = "block";
          // Update text with failure message
          responseMessage.textContent = "Form submission failed. Please try again.";
          // Set text color to red for error
          responseMessage.style.color = "red";
        });
      });
    });
  </script>
</body>
</html>
